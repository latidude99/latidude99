<!DOCTYPE html>
{% load static %}
{% static "snc/" as static_base %}

<html lang="en">
<head>
    <title>{{ title_tab }}</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css"
          integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">

    <style>
        html, body, #map-canvas {
            height: 100%;
            margin: 0px;
            padding: 0px;
            overflow: hidden;

        }

        footer {
            position: absolute;
        }

        h5 {
            color: white;
            font-family: Arial;
            font-size: 15px
        }

        #zoomLevel {
            background-color: skyblue;
            color: #333333;
            text-align: center;
            font-size: 12px;
        }

        body .card .card-body .card-text {
            white-space: pre-wrap;
        }

        .loader1 {
            width: 100%;
            height: 2px;
            display: inline-block;
            position: relative;
            background: rgba(255, 255, 255, 0.15);
            overflow: hidden;
        }

        .loader1::after {
            content: '';
            box-sizing: border-box;
            width: 0;
            height: 2px;
            background: #5897fb;
            position: absolute;
            top: 0;
            left: 0;
            animation: animFw 10s linear infinite;
        }

        @keyframes animFw {
            0% {
                width: 0;
            }
            100% {
                width: 100%;
            }
        }

        .loader2 {
            width: 100%;
            height: 2px;
            display: inline-block;
            position: relative;
            background: rgba(255, 255, 255, 0.15);
            overflow: hidden;
        }

        .loader2::after {
            content: '';
            box-sizing: border-box;
            width: 0;
            height: 2px;
            background: #eb974e;
            position: absolute;
            top: 0;
            left: 0;
            animation: animFw 10s linear infinite;
        }

        @keyframes animFw {
            0% {
                width: 0;
            }
            100% {
                width: 100%;
            }
        }

        a:hover {
            text-decoration-line: none;
        !important;
        }

        hr.list {
            border: 1px solid black;
            opacity: 25%;
        }

        .accordion-toggle:hover {
            text-decoration: none;
        }

        [data-toggle="collapse"] .fa:before {
            content: "\f068";
            opacity: 50%;
        }

        [data-toggle="collapse"].collapsed .fa:before {
            content: "\f067";
            opacity: 50%;
        }

        .info_text_ {
            color: #96281b;
        {#line-height: 6px;#} font-size: 15px;
            text-overflow: ellipsis;
            word-wrap: break-spaces;
            white-space: nowrap;
            overflow: hidden;
        }

    </style>
</head>

<body class="">


<div class="row h-100">

    <!-- CHARTS -->
    <div class="col-lg-9 h-100">
        {% block content_left %}{% endblock %}
    </div>

    <!-- INFO -->
    <div class="col-lg-3 h-100">
        <div class="container-fluid h-100" style="margin:0px;">
            <a href="{% url 'snc:index' %}" style="color:#333333 !important;">
                <h3 class="mt-4 text-center">{{ title_main }}</h3>
            </a>
            <p class="text-center" style="font-size: 18px;margin-bottom: 0px;">
                catalogue
                <span style="color:navy;font-size:20px;">{{ catalogue.file_identifier }}</span>
                <span>, released </span>
                <span style="color:navy;font-size:20px;">{{ catalogue.date }}</span>
            </p>

            <div id="accordion">
                <div class="card bg-transparent" style="border:none;">
                    <div class="card-header bg-transparent" style="border:none;">
                        <a class="card-link panel-heading collapsed" data-toggle="collapse"
                           data-target="#info_main" aria-expanded="true" aria-controls="info_main"
                           style="text-decoration: none; cursor:pointer;
                               font-size:16px; color:grey;">
                            <i class="fa mr-3" style="font-size:14px;color:grey;" aria-hidden="true"></i>
                            catalogue detail
                        </a>
                        <a class="card-link panel-heading collapsed float-right mr-2" data-toggle="collapse"
                           data-target="#help" aria-expanded="true" aria-controls="help"
                           style="text-decoration: none; cursor:pointer;
                               font-size:16px; color:grey;">
                            <i class="fa mr-3" style="font-size:14px;color:grey;" aria-hidden="true"></i>
                            help
                        </a>
                        <hr>

                        <div id="info_main" class="collapse" data-parent="#accordion"
                             aria-labelledby="info_main_head" style="color:#96281b;">
                            <div style="">
                                <p style="margin-bottom: 0px">
                                    Catalogue number:
                                    <span style="color:navy;font-size:17px;">
                                        {{ catalogue.file_identifier }}</span>
                                </p>
                                <p style="margin-bottom: 0px">
                                    Catalogue release date:
                                    <span style="color:navy;font-size:17px;">
                                        {{ catalogue.date }}</span>
                                </p>
                                <p style="margin-bottom: 0px">
                                    Released by:
                                    <span style="color:navy;font-size:17px;">
                                        {{ catalogue.organisation_name }}</span>
                                </p>
                                <p style="margin-bottom: 0px">
                                    Email:
                                    <span style="color:navy;font-size:17px;">
                                        {{ catalogue.email }}</span>
                                </p>
                                <p style="margin-bottom: 0px">
                                    Phone:
                                    <span style="color:navy;font-size:17px; margin-right:15px;">
                                        {{ catalogue.phone }}</span>
                                </p>
                                <p style="margin-bottom: 0px">
                                    Fax:
                                    <span style="color:navy;font-size:17px; margin-right:15px;">
                                        {{ catalogue.fax }}</span>
                                </p>
                                <p style="margin-bottom: 0px">
                                    Delivery Point:
                                    <span style="color:navy;font-size:17px;">
                                        {{ catalogue.delivery_point }}</span>
                                </p>
                                <p style="margin-bottom: 0px">
                                    City:
                                    <span style="color:navy;font-size:17px;">
                                        {{ catalogue.city }}</span>
                                </p>
                                <p style="margin-bottom: 0px">
                                    Administrative Area:
                                    <span style="color:navy;font-size:17px;">
                                        {{ catalogue.administrative_area }}</span>
                                </p>
                                <p style="margin-bottom: 0px">
                                    Postal Code:
                                    <span style="color:navy;font-size:17px;">
                                        {{ catalogue.postal_code }}</span>
                                </p>
                                <p style="margin-bottom: 0px">
                                    Country:
                                    <span style="color:navy;font-size:17px;">
                                        {{ catalogue.country }}</span>
                                </p>
                                <p style="margin-bottom: 0px">
                                    Total chart count:
                                    <span style="color:navy;font-size:17px;">
                                        {{ catalogue.charts_count }}</span>
                                </p>
                            </div>
                        </div>

                        <div id="help" class="collapse" data-parent="#accordion"
                             aria-labelledby="info_main_head" style="color:#96281b;">

                            <div style="">
                                <p style="margin-bottom: 0px">
                                    This is where the help will appear.
                                    <span style="color:navy;font-size:17px;">

                                    </span>
                                </p>

                            </div>
                        </div>
                    </div>

                </div>
            </div>
            <!-- accordion end -->
            <div>
                <form action="{% url 'snc:search_single' %}" method="post"
                      class="needs-validation" novalidate>
                    {% csrf_token %}
                    <div class="input-group">
                        <div class="mr-3 mt-2">
                            <label for="number">Search catalogue:</label>
                        </div>

                        <input class="form-control" id="search1" name="number" required placeholder="enter chart number"
                               style="height: calc(1.5em + .75rem + 4px); background-color:transparent; color:#333333;">
                        <div class="input-group-append">
                            <input type="submit" class="btn btn-primary"
                                   onclick="$('#loading1').show().delay(10000).hide(0);">
                        </div>
                        <div class="valid-feedback"></div>
                        <div class="invalid-feedback">Please enter chart number</div>
                    </div>
                </form>
            </div>

            {% block content_right %}{% endblock %}

        </div>


        <div class="" style="position:absolute; bottom:10px; right:10px">
            <div class="row">
                <div class="col-lg-0"></div>
                <div class="col-lg-12">
                    <div class="mt-4 float-right" style="cursor:pointer;margin-right: 0px;opacity:60%;">
                        <script type="text/javascript" src="https://cdnjs.buymeacoffee.com/1.0.0/button.prod.min.js"
                                data-name="bmc-button" data-slug="zWn1I6bVf" data-color="#FFDD0000" data-emoji=""
                                data-font="Comic"
                                data-text="Buy me a coffee" data-outline-color="#000000" data-font-color="#000000"
                                data-coffee-color="#ffffff">
                        </script>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>

<script>

    // csrf_token

    $(function () {

        // This function gets cookie with a given name
        function getCookie(name) {
            var cookieValue = null;
            if (document.cookie && document.cookie != '') {
                var cookies = document.cookie.split(';');
                for (var i = 0; i < cookies.length; i++) {
                    var cookie = jQuery.trim(cookies[i]);
                    // Does this cookie string begin with the name we want?
                    if (cookie.substring(0, name.length + 1) == (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
        }

        var csrftoken = getCookie('csrftoken');

        /*
        The functions below will create a header with csrftoken
        */
        function csrfSafeMethod(method) {
            // these HTTP methods do not require CSRF protection
            return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
        }

        function sameOrigin(url) {
            // test that a given url is a same-origin URL
            // url could be relative or scheme relative or absolute
            var host = document.location.host; // host + port
            var protocol = document.location.protocol;
            var sr_origin = '//' + host;
            var origin = protocol + sr_origin;
            // Allow absolute or scheme relative URLs to same origin
            return (url == origin || url.slice(0, origin.length + 1) == origin + '/') ||
                (url == sr_origin || url.slice(0, sr_origin.length + 1) == sr_origin + '/') ||
                // or any other URL that isn't scheme relative or absolute i.e relative.
                !(/^(\/\/|http:|https:).*/.test(url));
        }

        $.ajaxSetup({
            beforeSend: function (xhr, settings) {
                if (!csrfSafeMethod(settings.type) && sameOrigin(settings.url)) {
                    // Send the token to same-origin, relative URLs only.
                    // Send the token only if the method warrants CSRF protection
                    // Using the CSRFToken value acquired earlier
                    xhr.setRequestHeader("X-CSRFToken", csrftoken);
                }
            }
        });

    });
</script>

<script>
    // Disable form submissions if there are invalid fields
    (function () {
        'use strict';
        window.addEventListener('load', function () {
            // Get the forms we want to add validation styles to
            var forms = document.getElementsByClassName('needs-validation');
            // Loop over them and prevent submission
            var validation = Array.prototype.filter.call(forms, function (form) {
                form.addEventListener('submit', function (event) {
                    if (form.checkValidity() === false) {
                        event.preventDefault();
                        event.stopPropagation();
                        $('#loader4').hide();
                    }
                    form.classList.add('was-validated');
                }, false);
            });
        }, false);
    })();
</script>


</body>
</html>
